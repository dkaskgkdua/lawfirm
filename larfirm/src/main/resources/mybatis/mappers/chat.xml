<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<!-- 맵핑될 DAO 인터페이스의 Full name 을 줍니다. -->

<mapper namespace="Chat">


	<insert id="createChat" parameterType="String">
		<![CDATA[
			INSERT INTO CHAT(ID
							, CONDITION
							, REGI_ID
							, REGI_DT
							, UPDT_ID
							, UPDT_DT)
					  VALUES(CHAT_SEQ.nextval
							, 0
							, #{id}
							,sysdate
							, #{id}
							,sysdate)
		]]>
	</insert>
	<insert id="createParticipant" parameterType="Map">
		<![CDATA[
		INSERT INTO PARTICIPANT(ID
								, CHAT_ID
								, REGI_ID
								, REGI_DT)
						VALUES (PARTICIPANT_SEQ.nextval
		]]>
		<choose>
			<when test='participantId != null and participantId != ""'>
								,#{participantId}
			</when>
			<otherwise>
								, chat_seq.currval
			</otherwise>
			</choose>
		<![CDATA[
								, #{id}
								, sysdate)
		]]>
	</insert>

</mapper>